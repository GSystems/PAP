<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">

<h:head>
</h:head>
<h:body>
	<h:form>
		<p:panel id="studentPanel" header="Student Panel"
			value="#{assignmentBean.model.student}" style="margin-bottom:10px;">
			<h:panelGrid columns="2" cellpadding="5">

				<p:outputLabel for="firstname" value="#{msg['firstname']}" />
				<p:inputText id="firstname" required="true"
					value="#{assignmentBean.model.student.firstname}" />

				<p:outputLabel for="lastname" value="#{msg['lastname']}" />
				<p:inputText id="lastname" required="true"
					value="#{assignmentBean.model.student.lastname}" />

				<p:outputLabel for="email" value="#{msg['email']}" />
				<p:inputText id="email" value="#{assignmentBean.model.student.email}"
					validatorMessage="Invalid email format">
					<p:ajax event="change" update="growl" />
					<f:validateRegex
						pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
				</p:inputText>

				<p:outputLabel for="skills" value="#{msg['skills']}" />
				<p:inputText id="skills" value="#{assignmentBean.model.student.skills}"
					required="true" />

				<p:selectCheckboxMenu id="studentPreferences"
					value="#{assignmentBean.model.student.preferences}"
					label="#{msg['preferences']}" multiple="true" filter="true"
					filterMatchMode="startsWith" panelStyle="width:250px"
					converter="ProjectConverter">
					<f:selectItems value="#{assignmentBean.model.allProjects}"
						var="project" itemLabel="#{project.name}" itemValue="#{project}" />
				</p:selectCheckboxMenu>

				<p:tooltip for="email" mouseTracking="true"
					value="Please enter a valid email address" />
			</h:panelGrid>

		</p:panel>

		<p:growl id="growl" life="1500" />

		<p:commandButton id="submitStudentBtn" value="Submit"
			action="#{assignmentBean.processOperation}" update="@form"
			title="Submit the values" />
	</h:form>

	<h:form id="localeMenu">
		<p:selectOneMenu id="intern" value="#{assignmentBean.model.locale}">
			<f:selectItem itemLabel="En" itemValue="en_US" />
			<f:selectItem itemLabel="Ro" itemValue="ro_RO" />
			<p:ajax event="change" listener="#{assignmentBean.setLocale()}" />
		</p:selectOneMenu>
		<br />
		<p:commandButton value="Submit" update="@([id$='studentPanel'])" />

	</h:form>

</h:body>
</html>